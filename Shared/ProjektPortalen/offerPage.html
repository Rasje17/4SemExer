<!DOCTYPE html>
<html>

<head>
    <title>ProjektPortalen</title>
    <link rel="stylesheet" href="styles.css">
    <meta charset="utf-8"/>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        window.onload = () => {

            let offerId = (urlParams.get('offerId'));
            let userId = (urlParams.get('userId'));

            function offervalue(data) {
                let receivedOffer = JSON.parse(data);
                console.log(receivedOffer);
                document.getElementById("offerTitle").innerHTML = receivedOffer.title;
                document.getElementById('contactInfo').innerHTML = receivedOffer.contactInfo;
                document.getElementById('longDesc').innerHTML = receivedOffer.longDesc;
            }

            fetch('http://localhost:8888/offer?id=' + offerId)
                .then(response => response.json())
                .then(json => offervalue(json));


            let applyBtn = document.getElementById("applyButton");
            applyBtn.addEventListener("click", () => {
                console.log('inden if...')
                if(urlParams.get('userId') != null) {
                    fetch(('http://localhost:8888/offer?applicant=' + userId + '&offerId=' + offerId), 
                        {method : 'PUT'})
                        .then(resp => console.log(resp.status));
                } else {
                    //refer to login with url as parameter
                }
            })
        }

    </script>
</head>

<header>
    <a href="#home">Forside</a>
    <a href="#news">Nyheder</a>
    <a href="#contact">Kontakt</a>
</header>

<body>

    <h1>
        <p type='text' id='offerTitle'>
    </h1>

    <section class="offerPage">
        <p type='text' id='contactInfo'>
    </section>
    <section class="offerPage">
        <p type='text' id='longDesc'>
    </section>

    <button type="button" id="applyButton" >Ans√∏g</button>

</body>

</html>